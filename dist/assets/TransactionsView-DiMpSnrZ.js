import{c as i,o as r,a as t,d as B,m as h,p as y,g as I,r as U,v as f,C as _,q as z,x as D,k as T,t as c,u as d,b as g,e as p,n as w,i as C,w as R,F as M,h as S,j as L}from"./index-DeSzD2_9.js";import{u as H}from"./transactions-DTEC-O-J.js";import{r as q}from"./ArrowPathIcon-wKmh79yy.js";import{r as j}from"./ReceiptPercentIcon-ugYNRPXz.js";import{r as E}from"./ArrowRightIcon-B2_2eJMI.js";import{r as Z,a as G}from"./ArrowUpIcon-BHaZbMgi.js";function J(b,l){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function K(b,l){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function O(b,l){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 7.5 3 4.5m0 0 3-4.5M12 12v5.25M15 12H9m6 3H9m12-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},W={class:"card mb-8"},X={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Y={class:"card"},ee={class:"card-header"},te={class:"flex items-center justify-between"},se={class:"text-xl font-semibold text-gray-900"},ae={class:"flex items-center space-x-2"},oe=["disabled"],ne={key:0,class:"flex items-center justify-center py-12"},re={key:1,class:"text-center py-12"},ie={class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},le={class:"text-gray-600 mb-4"},de={key:2,class:"overflow-x-auto"},ce={class:"min-w-full divide-y divide-gray-200"},ue={class:"bg-white divide-y divide-gray-200"},me={class:"px-6 py-4 whitespace-nowrap"},pe={class:"flex items-center"},ve={class:"text-sm font-medium text-gray-900"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},fe={key:0,class:"font-medium"},ge={key:1,class:"text-gray-400"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},he={key:0,class:"font-medium"},we={key:1,class:"text-gray-400"},ke={key:3,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},_e={class:"flex-1 flex justify-between sm:hidden"},De=["disabled"],Te=["disabled"],Ce={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Me={class:"text-sm text-gray-700"},Se={class:"font-medium"},je={class:"font-medium"},$e={class:"font-medium"},Fe={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Ae=["disabled"],Ve=["onClick"],Ne=["disabled"],He=B({__name:"TransactionsView",setup(b){const l=H(),a=h({type:"",currency:"",startDate:"",endDate:""}),o=h(1),v=h(10),u=y(()=>{let n=[...l.transactions];return a.value.type&&(n=n.filter(e=>e.transaccionesTipoId===parseInt(a.value.type))),a.value.currency&&(a.value.currency==="ARS"?n=n.filter(e=>e.transaccionesPesos!==0):a.value.currency==="USD"&&(n=n.filter(e=>e.transaccionesDolares!==0))),a.value.startDate&&(n=n.filter(e=>new Date(e.transaccionesFecha)>=new Date(a.value.startDate))),a.value.endDate&&(n=n.filter(e=>new Date(e.transaccionesFecha)<=new Date(a.value.endDate))),n.sort((e,x)=>new Date(x.transaccionesFecha).getTime()-new Date(e.transaccionesFecha).getTime())}),m=y(()=>Math.ceil(u.value.length/v.value)),$=y(()=>{const n=(o.value-1)*v.value,e=n+v.value;return u.value.slice(n,e)}),F=y(()=>{const n=[],e=Math.max(1,o.value-2),x=Math.min(m.value,o.value+2);for(let s=e;s<=x;s++)n.push(s);return n}),k=y(()=>a.value.type||a.value.currency||a.value.startDate||a.value.endDate),A=n=>({1:G,2:Z,3:E,4:O})[n]||j,V=()=>{o.value=1},N=()=>{a.value={type:"",currency:"",startDate:"",endDate:""},o.value=1},P=async()=>{await l.fetchTransactions()};return I(()=>{l.fetchTransactions()}),(n,e)=>{const x=U("router-link");return r(),i("div",Q,[e[24]||(e[24]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Historial de Transacciones"),t("p",{class:"text-gray-600"}," Revisa todas tus transacciones y movimientos de dinero ")],-1)),t("div",W,[t("div",X,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de transacción",-1)),f(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.type=s),class:"input-field"},[...e[8]||(e[8]=[z('<option value="">Todos los tipos</option><option value="1">Depósito</option><option value="2">Retiro</option><option value="3">Transferencia</option><option value="4">Cambio de moneda</option>',5)])],512),[[_,a.value.type]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Moneda",-1)),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.currency=s),class:"input-field"},[...e[10]||(e[10]=[t("option",{value:""},"Todas las monedas",-1),t("option",{value:"ARS"},"Pesos Argentinos",-1),t("option",{value:"USD"},"Dólares",-1)])],512),[[_,a.value.currency]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Desde",-1)),f(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.startDate=s),type:"date",class:"input-field"},null,512),[[D,a.value.startDate]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Hasta",-1)),f(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.endDate=s),type:"date",class:"input-field"},null,512),[[D,a.value.endDate]])])]),t("div",{class:"mt-4 flex justify-end space-x-3"},[t("button",{onClick:N,class:"btn-secondary"}," Limpiar filtros "),t("button",{onClick:V,class:"btn-primary"}," Aplicar filtros ")])]),t("div",Y,[t("div",ee,[t("div",te,[t("h2",se," Transacciones ("+c(u.value.length)+") ",1),t("div",ae,[t("button",{onClick:P,disabled:d(l).isLoading,class:"btn-secondary text-sm"},[g(d(q),{class:w(["w-4 h-4 mr-2",{"animate-spin":d(l).isLoading}])},null,8,["class"]),e[14]||(e[14]=p(" Actualizar ",-1))],8,oe)])])]),d(l).isLoading?(r(),i("div",ne,[...e[15]||(e[15]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):u.value.length===0?(r(),i("div",re,[t("div",ie,[g(d(j),{class:"w-8 h-8 text-gray-400"})]),e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No hay transacciones",-1)),t("p",le,c(k.value?"No se encontraron transacciones con los filtros aplicados":"Tus transacciones aparecerán aquí"),1),k.value?T("",!0):(r(),C(x,{key:0,to:"/send-money",class:"btn-primary"},{default:R(()=>[...e[16]||(e[16]=[p(" Realizar primera transacción ",-1)])]),_:1}))])):(r(),i("div",de,[t("table",ce,[e[19]||(e[19]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tipo "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Pesos (ARS) "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dólares (USD) "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado ")])],-1)),t("tbody",ue,[(r(!0),i(M,null,S($.value,s=>(r(),i("tr",{key:s.transaccionesId,class:"hover:bg-gray-50"},[t("td",me,[t("div",pe,[t("div",{class:w(["w-8 h-8 rounded-full flex items-center justify-center mr-3",d(l).getTransactionTypeColor(s.transaccionesTipoId)])},[(r(),C(L(A(s.transaccionesTipoId)),{class:"w-4 h-4"}))],2),t("div",ve,c(d(l).getTransactionTypeName(s.transaccionesTipoId)),1)])]),t("td",xe,c(d(l).formatDate(s.transaccionesFecha)),1),t("td",ye,[s.transaccionesPesos!==0?(r(),i("span",fe,c(d(l).formatAmount(s.transaccionesPesos,"pesos")),1)):(r(),i("span",ge,"-"))]),t("td",be,[s.transaccionesDolares!==0?(r(),i("span",he,c(d(l).formatAmount(s.transaccionesDolares,"dolares")),1)):(r(),i("span",we,"-"))]),e[18]||(e[18]=t("td",{class:"px-6 py-4 whitespace-nowrap"},[t("span",{class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-success-100 text-success-800"}," Completada ")],-1))]))),128))])])])),m.value>1?(r(),i("div",ke,[t("div",_e,[t("button",{onClick:e[4]||(e[4]=s=>o.value=Math.max(1,o.value-1)),disabled:o.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Anterior ",8,De),t("button",{onClick:e[5]||(e[5]=s=>o.value=Math.min(m.value,o.value+1)),disabled:o.value===m.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Siguiente ",8,Te)]),t("div",Ce,[t("div",null,[t("p",Me,[e[20]||(e[20]=p(" Mostrando ",-1)),t("span",Se,c((o.value-1)*v.value+1),1),e[21]||(e[21]=p(" a ",-1)),t("span",je,c(Math.min(o.value*v.value,u.value.length)),1),e[22]||(e[22]=p(" de ",-1)),t("span",$e,c(u.value.length),1),e[23]||(e[23]=p(" resultados ",-1))])]),t("div",null,[t("nav",Fe,[t("button",{onClick:e[6]||(e[6]=s=>o.value=Math.max(1,o.value-1)),disabled:o.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[g(d(J),{class:"h-5 w-5"})],8,Ae),(r(!0),i(M,null,S(F.value,s=>(r(),i("button",{key:s,onClick:Pe=>o.value=s,class:w(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s===o.value?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},c(s),11,Ve))),128)),t("button",{onClick:e[7]||(e[7]=s=>o.value=Math.min(m.value,o.value+1)),disabled:o.value===m.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[g(d(K),{class:"h-5 w-5"})],8,Ne)])])])])):T("",!0)])])}}});export{He as default};
