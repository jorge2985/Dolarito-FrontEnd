import{d as M,f as N,A as P,m as b,p as U,c as $,o as w,a as e,t as i,b as y,u as h,B as W,s as q,k as D,v as C,x as F,C as B,q as G,e as z,r as L,i as V,w as I}from"./index-DeSzD2_9.js";import{u as E}from"./transactions-DTEC-O-J.js";import{r as O}from"./ExclamationTriangleIcon-GKU9ARcA.js";import{r as H,a as J,b as K}from"./PaperAirplaneIcon-BtBOIgj7.js";import{r as Q}from"./ArrowsRightLeftIcon-BMzKj2fu.js";import{a as X,r as Y}from"./ArrowUpIcon-BHaZbMgi.js";const Z={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},ee={class:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto"},te={class:"p-6"},se={class:"flex items-center justify-between mb-6"},oe={class:"text-xl font-semibold text-gray-900"},ne={class:"space-y-6"},re={class:"relative"},ae=["disabled"],ie={class:"absolute inset-y-0 right-0 pr-3 flex items-center"},le={class:"text-gray-500 text-sm font-medium"},de=["disabled"],ue=["disabled"],ce={class:"p-4 bg-gray-50 rounded-lg"},me={class:"text-lg font-semibold text-gray-900"},ve={key:0,class:"p-4 bg-blue-50 rounded-lg border border-blue-200"},pe={class:"text-sm text-blue-800 space-y-1"},be={class:"flex justify-between"},xe={class:"font-medium"},fe={class:"flex justify-between"},ge={class:"font-medium"},ye={class:"flex justify-between border-t border-blue-200 pt-1 mt-2"},he={class:"font-medium"},we={class:"flex justify-end space-x-4 pt-4 border-t border-gray-200"},_e=["disabled"],$e=["disabled"],Se={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},De=M({__name:"DepositModal",props:{currency:{}},emits:["close","success"],setup(R,{emit:S}){const d=R,x=S,u=N(),A=E(),k=P(),r=b(!1),n=b(""),t=b(""),c=b(""),m=()=>{var a,o;return d.currency==="ARS"?((a=u.user)==null?void 0:a.userPesos)||0:d.currency==="USD"&&((o=u.user)==null?void 0:o.userDolares)||0},v=()=>m()+(parseFloat(n.value)||0),p=U(()=>n.value&&parseFloat(n.value)>0&&t.value),_=(a,o)=>new Intl.NumberFormat("es-AR",{style:"currency",currency:o,minimumFractionDigits:0,maximumFractionDigits:2}).format(a),j=async()=>{var a;if(p.value)try{r.value=!0;const o=parseFloat(n.value),f={userId:((a=u.user)==null?void 0:a.userId)||"",transaccionesPesos:d.currency==="ARS"?o:0,transaccionesDolares:d.currency==="USD"?o:0,transaccionesTipoId:1,transaccionesFecha:new Date().toISOString()};await A.createTransaction(f)&&(k.success(`Depósito de ${_(o,d.currency)} realizado exitosamente`),x("success"),x("close"))}catch(o){console.error("Deposit error:",o)}finally{r.value=!1}};return(a,o)=>(w(),$("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("h2",oe,"Depositar "+i(a.currency),1),e("button",{onClick:o[0]||(o[0]=f=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 transition-colors"},[y(h(W),{class:"w-6 h-6"})])]),e("form",{onSubmit:q(j,["prevent"])},[e("div",ne,[e("div",null,[o[5]||(o[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Cantidad a depositar ",-1)),e("div",re,[C(e("input",{"onUpdate:modelValue":o[1]||(o[1]=f=>n.value=f),type:"number",step:"0.01",min:"0",required:"",class:"input-field pr-16",placeholder:"0.00",disabled:r.value},null,8,ae),[[F,n.value]]),e("div",ie,[e("span",le,i(a.currency),1)])])]),e("div",null,[o[7]||(o[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Método de pago ",-1)),C(e("select",{"onUpdate:modelValue":o[2]||(o[2]=f=>t.value=f),required:"",class:"input-field",disabled:r.value},[...o[6]||(o[6]=[G('<option value="">Selecciona un método</option><option value="bank_transfer">Transferencia bancaria</option><option value="credit_card">Tarjeta de crédito</option><option value="debit_card">Tarjeta de débito</option><option value="cash">Efectivo</option>',5)])],8,de),[[B,t.value]])]),e("div",null,[o[8]||(o[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descripción (opcional) ",-1)),C(e("textarea",{"onUpdate:modelValue":o[3]||(o[3]=f=>c.value=f),rows:"3",class:"input-field",placeholder:"Agrega una descripción para este depósito...",disabled:r.value},null,8,ue),[[F,c.value]])]),e("div",ce,[o[9]||(o[9]=e("h3",{class:"text-sm font-medium text-gray-900 mb-2"},"Tu saldo actual",-1)),e("div",me,i(_(m(),a.currency)),1)]),n.value?(w(),$("div",ve,[o[13]||(o[13]=e("h3",{class:"text-sm font-medium text-blue-900 mb-2"},"Resumen del depósito",-1)),e("div",pe,[e("div",be,[o[10]||(o[10]=e("span",null,"Depositar:",-1)),e("span",xe,i(_(parseFloat(n.value)||0,a.currency)),1)]),e("div",fe,[o[11]||(o[11]=e("span",null,"Saldo actual:",-1)),e("span",ge,i(_(m(),a.currency)),1)]),e("div",ye,[o[12]||(o[12]=e("span",null,"Nuevo saldo:",-1)),e("span",he,i(_(v(),a.currency)),1)])])])):D("",!0),e("div",we,[e("button",{type:"button",onClick:o[4]||(o[4]=f=>a.$emit("close")),class:"btn-secondary",disabled:r.value}," Cancelar ",8,_e),e("button",{type:"submit",disabled:r.value||!p.value,class:"btn-success"},[r.value?(w(),$("div",Se)):D("",!0),z(" "+i(r.value?"Procesando...":"Depositar"),1)],8,$e)])])],32)])])]))}}),ke={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Ce={class:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto"},Ae={class:"p-6"},Re={class:"flex items-center justify-between mb-6"},je={class:"text-xl font-semibold text-gray-900"},Fe={class:"space-y-6"},Te={class:"relative"},Ue=["max","disabled"],Be={class:"absolute inset-y-0 right-0 pr-3 flex items-center"},Me={class:"text-gray-500 text-sm font-medium"},Ne={class:"mt-2 flex justify-between text-sm text-gray-600"},Ve=["disabled"],Ie={key:0},Pe=["disabled"],We=["disabled"],qe={class:"p-4 bg-gray-50 rounded-lg"},ze={class:"text-lg font-semibold text-gray-900"},Ee={key:1,class:"p-4 bg-red-50 rounded-lg border border-red-200"},Ge={class:"flex"},Le={key:2,class:"p-4 bg-orange-50 rounded-lg border border-orange-200"},Oe={class:"text-sm text-orange-800 space-y-1"},He={class:"flex justify-between"},Je={class:"font-medium"},Ke={class:"flex justify-between"},Qe={class:"font-medium"},Xe={class:"flex justify-between border-t border-orange-200 pt-1 mt-2"},Ye={class:"font-medium"},Ze={class:"flex justify-end space-x-4 pt-4 border-t border-gray-200"},et=["disabled"],tt=["disabled"],st={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},ot=M({__name:"WithdrawModal",props:{currency:{}},emits:["close","success"],setup(R,{emit:S}){const d=R,x=S,u=N(),A=E(),k=P(),r=b(!1),n=b(""),t=b(""),c=b(""),m=b(""),v=()=>{var l,s;return d.currency==="ARS"?((l=u.user)==null?void 0:l.userPesos)||0:d.currency==="USD"&&((s=u.user)==null?void 0:s.userDolares)||0},p=()=>v()-(parseFloat(n.value)||0),_=U(()=>(parseFloat(n.value)||0)<=v()),j=U(()=>n.value&&parseFloat(n.value)>0&&t.value&&_.value&&(t.value!=="bank_transfer"||c.value)),a=(l,s)=>new Intl.NumberFormat("es-AR",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:2}).format(l),o=()=>{n.value=v().toString()},f=async()=>{var l;if(j.value)try{r.value=!0;const s=parseFloat(n.value),g={userId:((l=u.user)==null?void 0:l.userId)||"",transaccionesPesos:d.currency==="ARS"?-s:0,transaccionesDolares:d.currency==="USD"?-s:0,transaccionesTipoId:2,transaccionesFecha:new Date().toISOString()};await A.createTransaction(g)&&(k.success(`Retiro de ${a(s,d.currency)} realizado exitosamente`),x("success"),x("close"))}catch(s){console.error("Withdraw error:",s)}finally{r.value=!1}};return(l,s)=>(w(),$("div",ke,[e("div",Ce,[e("div",Ae,[e("div",Re,[e("h2",je,"Retirar "+i(l.currency),1),e("button",{onClick:s[0]||(s[0]=g=>l.$emit("close")),class:"text-gray-400 hover:text-gray-600 transition-colors"},[y(h(W),{class:"w-6 h-6"})])]),e("form",{onSubmit:q(f,["prevent"])},[e("div",Fe,[e("div",null,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Cantidad a retirar ",-1)),e("div",Te,[C(e("input",{"onUpdate:modelValue":s[1]||(s[1]=g=>n.value=g),type:"number",step:"0.01",min:"0",max:v(),required:"",class:"input-field pr-16",placeholder:"0.00",disabled:r.value},null,8,Ue),[[F,n.value]]),e("div",Be,[e("span",Me,i(l.currency),1)])]),e("div",Ne,[e("span",null,"Disponible: "+i(a(v(),l.currency)),1),e("button",{type:"button",onClick:o,class:"text-primary-600 hover:text-primary-700 font-medium"}," Usar todo ")])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Método de retiro ",-1)),C(e("select",{"onUpdate:modelValue":s[2]||(s[2]=g=>t.value=g),required:"",class:"input-field",disabled:r.value},[...s[7]||(s[7]=[e("option",{value:""},"Selecciona un método",-1),e("option",{value:"bank_transfer"},"Transferencia bancaria",-1),e("option",{value:"cash_pickup"},"Retiro en efectivo",-1),e("option",{value:"atm"},"Cajero automático",-1)])],8,Ve),[[B,t.value]])]),t.value==="bank_transfer"?(w(),$("div",Ie,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Cuenta bancaria ",-1)),C(e("select",{"onUpdate:modelValue":s[3]||(s[3]=g=>c.value=g),class:"input-field",disabled:r.value},[...s[9]||(s[9]=[e("option",{value:""},"Selecciona una cuenta",-1),e("option",{value:"account_1"},"****1234 - Banco Santander",-1),e("option",{value:"account_2"},"****5678 - Banco Nación",-1),e("option",{value:"account_3"},"****9012 - Banco Galicia",-1)])],8,Pe),[[B,c.value]])])):D("",!0),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descripción (opcional) ",-1)),C(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=g=>m.value=g),rows:"3",class:"input-field",placeholder:"Agrega una descripción para este retiro...",disabled:r.value},null,8,We),[[F,m.value]])]),e("div",qe,[s[12]||(s[12]=e("h3",{class:"text-sm font-medium text-gray-900 mb-2"},"Tu saldo actual",-1)),e("div",ze,i(a(v(),l.currency)),1)]),_.value?D("",!0):(w(),$("div",Ee,[e("div",Ge,[y(h(O),{class:"h-5 w-5 text-red-400"}),s[13]||(s[13]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-red-800"},"Saldo insuficiente"),e("p",{class:"mt-1 text-sm text-red-700"}," No tienes suficiente saldo para realizar este retiro. ")],-1))])])),n.value&&_.value?(w(),$("div",Le,[s[17]||(s[17]=e("h3",{class:"text-sm font-medium text-orange-900 mb-2"},"Resumen del retiro",-1)),e("div",Oe,[e("div",He,[s[14]||(s[14]=e("span",null,"Retirar:",-1)),e("span",Je,i(a(parseFloat(n.value)||0,l.currency)),1)]),e("div",Ke,[s[15]||(s[15]=e("span",null,"Saldo actual:",-1)),e("span",Qe,i(a(v(),l.currency)),1)]),e("div",Xe,[s[16]||(s[16]=e("span",null,"Nuevo saldo:",-1)),e("span",Ye,i(a(p(),l.currency)),1)])])])):D("",!0),e("div",Ze,[e("button",{type:"button",onClick:s[5]||(s[5]=g=>l.$emit("close")),class:"btn-secondary",disabled:r.value}," Cancelar ",8,et),e("button",{type:"submit",disabled:r.value||!j.value,class:"btn-danger"},[r.value?(w(),$("div",st)):D("",!0),z(" "+i(r.value?"Procesando...":"Retirar"),1)],8,tt)])])],32)])])]))}}),nt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},rt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},at={class:"card bg-gradient-to-br from-blue-500 to-blue-700 text-white"},it={class:"flex items-center justify-between mb-6"},lt={class:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center"},dt={class:"text-3xl font-bold mb-4"},ut={class:"flex space-x-3"},ct={class:"card bg-gradient-to-br from-green-500 to-green-700 text-white"},mt={class:"flex items-center justify-between mb-6"},vt={class:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center"},pt={class:"text-3xl font-bold mb-4"},bt={class:"flex space-x-3"},xt={class:"card mb-8"},ft={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},gt={class:"text-center p-4 bg-gray-50 rounded-lg"},yt={class:"text-gray-600"},ht={class:"text-center p-4 bg-gray-50 rounded-lg"},wt={class:"text-gray-600"},_t={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},$t={class:"flex items-center space-x-3"},St={class:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center group-hover:bg-primary-200 transition-colors"},Dt={class:"flex items-center space-x-3"},kt={class:"w-12 h-12 bg-success-100 rounded-lg flex items-center justify-center group-hover:bg-success-200 transition-colors"},Ct={class:"flex items-center space-x-3"},At={class:"w-12 h-12 bg-warning-100 rounded-lg flex items-center justify-center group-hover:bg-warning-200 transition-colors"},Rt={class:"flex items-center space-x-3"},jt={class:"w-12 h-12 bg-danger-100 rounded-lg flex items-center justify-center group-hover:bg-danger-200 transition-colors"},T=1e3,It=M({__name:"WalletView",setup(R){const S=N(),d=b(!1),x=b(!1),u=b("ARS"),A=()=>{var c,m;const n=((c=S.user)==null?void 0:c.userPesos)||0;return(((m=S.user)==null?void 0:m.userDolares)||0)+n/T},k=(n,t)=>new Intl.NumberFormat("es-AR",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(n),r=()=>{console.log("Transaction successful")};return(n,t)=>{var m,v;const c=L("router-link");return w(),$("div",nt,[t[18]||(t[18]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Mi Billetera"),e("p",{class:"text-gray-600"}," Gestiona tus fondos en pesos argentinos y dólares estadounidenses ")],-1)),e("div",rt,[e("div",at,[e("div",it,[t[8]||(t[8]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white/90"},"Pesos Argentinos"),e("p",{class:"text-white/70 text-sm"},"ARS")],-1)),e("div",lt,[y(h(H),{class:"w-6 h-6 text-white"})])]),e("div",dt,i(k(((m=h(S).user)==null?void 0:m.userPesos)||0,"ARS")),1),e("div",ut,[e("button",{onClick:t[0]||(t[0]=p=>{d.value=!0,u.value="ARS"}),class:"flex-1 bg-white/20 hover:bg-white/30 text-white text-center py-2 px-4 rounded-lg transition-colors duration-200 text-sm font-medium"}," Depositar "),e("button",{onClick:t[1]||(t[1]=p=>{x.value=!0,u.value="ARS"}),class:"flex-1 bg-white/20 hover:bg-white/30 text-white text-center py-2 px-4 rounded-lg transition-colors duration-200 text-sm font-medium"}," Retirar ")])]),e("div",ct,[e("div",mt,[t[9]||(t[9]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white/90"},"Dólares Estadounidenses"),e("p",{class:"text-white/70 text-sm"},"USD")],-1)),e("div",vt,[y(h(J),{class:"w-6 h-6 text-white"})])]),e("div",pt,i(k(((v=h(S).user)==null?void 0:v.userDolares)||0,"USD")),1),e("div",bt,[e("button",{onClick:t[2]||(t[2]=p=>{d.value=!0,u.value="USD"}),class:"flex-1 bg-white/20 hover:bg-white/30 text-white text-center py-2 px-4 rounded-lg transition-colors duration-200 text-sm font-medium"}," Depositar "),e("button",{onClick:t[3]||(t[3]=p=>{x.value=!0,u.value="USD"}),class:"flex-1 bg-white/20 hover:bg-white/30 text-white text-center py-2 px-4 rounded-lg transition-colors duration-200 text-sm font-medium"}," Retirar ")])])]),e("div",xt,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Tipo de Cambio",-1)),e("div",ft,[e("div",{class:"text-center p-4 bg-gray-50 rounded-lg"},[t[10]||(t[10]=e("div",{class:"text-2xl font-bold text-gray-900"},"1 USD",-1)),e("div",{class:"text-gray-600"},"= "+i(T)+" ARS")]),e("div",gt,[t[11]||(t[11]=e("div",{class:"text-2xl font-bold text-gray-900"},"1 ARS",-1)),e("div",yt,"= "+i((1/T).toFixed(4))+" USD",1)]),e("div",ht,[t[12]||(t[12]=e("div",{class:"text-2xl font-bold text-gray-900"},"Total",-1)),e("div",wt,i(k(A(),"USD")),1)])])]),e("div",_t,[y(c,{to:"/send-money",class:"card hover:shadow-md transition-shadow duration-200 group cursor-pointer"},{default:I(()=>[e("div",$t,[e("div",St,[y(h(K),{class:"w-6 h-6 text-primary-600"})]),t[14]||(t[14]=e("div",null,[e("h3",{class:"font-medium text-gray-900"},"Enviar Dinero"),e("p",{class:"text-sm text-gray-600"},"Transferir a otro usuario")],-1))])]),_:1}),y(c,{to:"/exchange",class:"card hover:shadow-md transition-shadow duration-200 group cursor-pointer"},{default:I(()=>[e("div",Dt,[e("div",kt,[y(h(Q),{class:"w-6 h-6 text-success-600"})]),t[15]||(t[15]=e("div",null,[e("h3",{class:"font-medium text-gray-900"},"Cambio de Moneda"),e("p",{class:"text-sm text-gray-600"},"Pesos ↔ Dólares")],-1))])]),_:1}),e("button",{onClick:t[4]||(t[4]=p=>d.value=!0),class:"card hover:shadow-md transition-shadow duration-200 group cursor-pointer"},[e("div",Ct,[e("div",At,[y(h(X),{class:"w-6 h-6 text-warning-600"})]),t[16]||(t[16]=e("div",null,[e("h3",{class:"font-medium text-gray-900"},"Depositar"),e("p",{class:"text-sm text-gray-600"},"Agregar fondos")],-1))])]),e("button",{onClick:t[5]||(t[5]=p=>x.value=!0),class:"card hover:shadow-md transition-shadow duration-200 group cursor-pointer"},[e("div",Rt,[e("div",jt,[y(h(Y),{class:"w-6 h-6 text-danger-600"})]),t[17]||(t[17]=e("div",null,[e("h3",{class:"font-medium text-gray-900"},"Retirar"),e("p",{class:"text-sm text-gray-600"},"Sacar fondos")],-1))])])]),d.value?(w(),V(De,{key:0,currency:u.value,onClose:t[6]||(t[6]=p=>d.value=!1),onSuccess:r},null,8,["currency"])):D("",!0),x.value?(w(),V(ot,{key:1,currency:u.value,onClose:t[7]||(t[7]=p=>x.value=!1),onSuccess:r},null,8,["currency"])):D("",!0)])}}});export{It as default};
