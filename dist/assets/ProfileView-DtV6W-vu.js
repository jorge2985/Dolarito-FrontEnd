import{d as H,f as J,A as K,m as u,p as h,g as O,c as g,o as c,a as s,s as V,v as f,x as j,u as r,k as P,e as U,t as m,y as C,i as _,q as Q,b as W}from"./index-DeSzD2_9.js";import{u as X}from"./transactions-DTEC-O-J.js";import{r as F,a as L}from"./EyeIcon-xBOaMgXS.js";import{r as Y}from"./UserIcon-BV0N09Ky.js";const Z={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ss={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},es={class:"lg:col-span-2"},ts={class:"card"},as={class:"space-y-6"},os={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},rs=["disabled"],ls=["disabled"],is=["value"],ns={class:"flex justify-end space-x-4"},ds=["disabled"],us=["disabled"],cs={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},ms={class:"card mt-8"},vs={class:"space-y-6"},ps={class:"relative"},fs=["type","disabled"],bs={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xs={class:"relative"},ys=["type","disabled"],ws=["type","disabled"],gs={key:0,class:"mt-1 text-xs text-red-600"},_s={class:"flex justify-end space-x-4"},hs=["disabled"],Ps=["disabled"],Cs={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},ks={class:"space-y-8"},Ds={class:"card"},Ns={class:"space-y-4"},Es={class:"flex items-center space-x-3"},Ss={class:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center"},As={class:"text-sm font-medium text-gray-900"},Ts={class:"text-xs text-gray-600"},Vs={class:"pt-4 border-t border-gray-200"},js={class:"flex justify-between items-center mb-2"},Us={class:"font-semibold"},Fs={class:"flex justify-between items-center"},Ls={class:"font-semibold"},Ms={class:"card"},qs={class:"space-y-3"},Is={class:"flex justify-between items-center"},Rs={class:"font-semibold"},$s={class:"flex justify-between items-center"},Bs={class:"font-semibold text-sm"},Os=H({__name:"ProfileView",setup(zs){const l=J(),k=X(),b=K(),d=u(!1),i=u(!1),x=u(!1),y=u(!1),M=u(!1),n=u({userName:"",userEmail:""}),t=u({currentPassword:"",newPassword:"",confirmPassword:""}),w=u({userName:"",userEmail:""}),q=h(()=>n.value.userName!==w.value.userName||n.value.userEmail!==w.value.userEmail),D=h(()=>t.value.newPassword===t.value.confirmPassword),I=h(()=>t.value.currentPassword&&t.value.newPassword&&t.value.confirmPassword&&D.value&&t.value.newPassword.length>=8),N=(a,e)=>new Intl.NumberFormat("es-AR",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:2}).format(a),R=()=>{var e;return new Date(((e=l.user)==null?void 0:e.userLastUpdate)||Date.now()).toLocaleDateString("es-AR",{year:"numeric",month:"long"})},$=()=>{var p;const a=new Date(((p=l.user)==null?void 0:p.userLastUpdate)||Date.now()),v=Math.floor((new Date().getTime()-a.getTime())/(1e3*60*60*24));return v===0?"Hoy":v===1?"Ayer":v<7?`Hace ${v} días`:a.toLocaleDateString("es-AR")},E=()=>{l.user&&(n.value={userName:l.user.userName,userEmail:l.user.userEmail},w.value={...n.value})},B=()=>{E()},S=()=>{t.value={currentPassword:"",newPassword:"",confirmPassword:""}},z=async()=>{try{d.value=!0,await new Promise(a=>setTimeout(a,1e3)),b.success("Perfil actualizado exitosamente"),w.value={...n.value}}catch(a){console.error("Profile update error:",a),b.error("Error al actualizar el perfil")}finally{d.value=!1}},G=async()=>{try{i.value=!0,await new Promise(a=>setTimeout(a,1e3)),b.success("Contraseña cambiada exitosamente"),S()}catch(a){console.error("Password change error:",a),b.error("Error al cambiar la contraseña")}finally{i.value=!1}};return O(()=>{E(),k.fetchTransactions()}),(a,e)=>{var v,p,A,T;return c(),g("div",Z,[e[24]||(e[24]=s("div",{class:"mb-8"},[s("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Mi Perfil"),s("p",{class:"text-gray-600"}," Gestiona tu información personal y configuración de cuenta ")],-1)),s("div",ss,[s("div",es,[s("div",ts,[e[11]||(e[11]=s("div",{class:"card-header"},[s("h2",{class:"text-xl font-semibold text-gray-900"},"Información Personal")],-1)),s("form",{onSubmit:V(z,["prevent"])},[s("div",as,[s("div",os,[s("div",null,[e[7]||(e[7]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre de usuario ",-1)),f(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.userName=o),type:"text",required:"",class:"input-field",disabled:d.value},null,8,rs),[[j,n.value.userName]])]),s("div",null,[e[8]||(e[8]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Correo electrónico ",-1)),f(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.value.userEmail=o),type:"email",required:"",class:"input-field",disabled:d.value},null,8,ls),[[j,n.value.userEmail]])])]),s("div",null,[e[9]||(e[9]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ID de usuario ",-1)),s("input",{value:(v=r(l).user)==null?void 0:v.userId,type:"text",disabled:"",class:"input-field bg-gray-50 text-gray-500"},null,8,is),e[10]||(e[10]=s("p",{class:"mt-1 text-sm text-gray-600"}," Este ID es único y no se puede cambiar ",-1))]),s("div",ns,[s("button",{type:"button",onClick:B,class:"btn-secondary",disabled:d.value}," Cancelar ",8,ds),s("button",{type:"submit",disabled:d.value||!q.value,class:"btn-primary"},[d.value?(c(),g("div",cs)):P("",!0),U(" "+m(d.value?"Guardando...":"Guardar Cambios"),1)],8,us)])])],32)]),s("div",ms,[e[15]||(e[15]=s("div",{class:"card-header"},[s("h2",{class:"text-xl font-semibold text-gray-900"},"Cambiar Contraseña")],-1)),s("form",{onSubmit:V(G,["prevent"])},[s("div",vs,[s("div",null,[e[12]||(e[12]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Contraseña actual ",-1)),s("div",ps,[f(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.currentPassword=o),type:x.value?"text":"password",required:"",class:"input-field pr-10",disabled:i.value},null,8,fs),[[C,t.value.currentPassword]]),s("button",{type:"button",onClick:e[3]||(e[3]=o=>x.value=!x.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[x.value?(c(),_(r(L),{key:1,class:"h-5 w-5 text-gray-400"})):(c(),_(r(F),{key:0,class:"h-5 w-5 text-gray-400"}))])])]),s("div",bs,[s("div",null,[e[13]||(e[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nueva contraseña ",-1)),s("div",xs,[f(s("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.newPassword=o),type:y.value?"text":"password",required:"",class:"input-field pr-10",disabled:i.value},null,8,ys),[[C,t.value.newPassword]]),s("button",{type:"button",onClick:e[5]||(e[5]=o=>y.value=!y.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[y.value?(c(),_(r(L),{key:1,class:"h-5 w-5 text-gray-400"})):(c(),_(r(F),{key:0,class:"h-5 w-5 text-gray-400"}))])])]),s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Confirmar nueva contraseña ",-1)),f(s("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.confirmPassword=o),type:M.value?"text":"password",required:"",class:"input-field",disabled:i.value},null,8,ws),[[C,t.value.confirmPassword]]),t.value.confirmPassword&&!D.value?(c(),g("p",gs," Las contraseñas no coinciden ")):P("",!0)])]),s("div",_s,[s("button",{type:"button",onClick:S,class:"btn-secondary",disabled:i.value}," Cancelar ",8,hs),s("button",{type:"submit",disabled:i.value||!I.value,class:"btn-primary"},[i.value?(c(),g("div",Cs)):P("",!0),U(" "+m(i.value?"Cambiando...":"Cambiar Contraseña"),1)],8,Ps)])])],32)])]),s("div",ks,[s("div",Ds,[e[18]||(e[18]=s("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resumen de Cuenta",-1)),s("div",Ns,[s("div",Es,[s("div",Ss,[W(r(Y),{class:"w-6 h-6 text-primary-600"})]),s("div",null,[s("p",As,m((p=r(l).user)==null?void 0:p.userName),1),s("p",Ts,"Usuario desde "+m(R()),1)])]),s("div",Vs,[s("div",js,[e[16]||(e[16]=s("span",{class:"text-sm text-gray-600"},"Pesos",-1)),s("span",Us,m(N(((A=r(l).user)==null?void 0:A.userPesos)||0,"ARS")),1)]),s("div",Fs,[e[17]||(e[17]=s("span",{class:"text-sm text-gray-600"},"Dólares",-1)),s("span",Ls,m(N(((T=r(l).user)==null?void 0:T.userDolares)||0,"USD")),1)])])])]),s("div",Ms,[e[22]||(e[22]=s("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Estadísticas",-1)),s("div",qs,[s("div",Is,[e[19]||(e[19]=s("span",{class:"text-sm text-gray-600"},"Total de transacciones",-1)),s("span",Rs,m(r(k).totalTransactions),1)]),s("div",$s,[e[20]||(e[20]=s("span",{class:"text-sm text-gray-600"},"Última actividad",-1)),s("span",Bs,m($()),1)]),e[21]||(e[21]=s("div",{class:"flex justify-between items-center"},[s("span",{class:"text-sm text-gray-600"},"Estado de cuenta"),s("span",{class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-success-100 text-success-800"}," Activa ")],-1))])]),e[23]||(e[23]=Q('<div class="card"><h3 class="text-lg font-semibold text-gray-900 mb-4">Seguridad</h3><div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-gray-600">Autenticación de dos factores</span><button class="text-primary-600 hover:text-primary-700 text-sm font-medium"> Activar </button></div><div class="flex items-center justify-between"><span class="text-sm text-gray-600">Notificaciones</span><button class="text-primary-600 hover:text-primary-700 text-sm font-medium"> Configurar </button></div></div></div>',1))])])])}}});export{Os as default};
